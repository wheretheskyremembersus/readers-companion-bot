<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Our Story â€” Readersâ€™ Companion</title>

<style>
/* --------------------
   Page Styling (Canva-like)
--------------------- */

body {
  margin: 0;
  font-family: "Palatino Linotype", Palatino, "Book Antiqua", serif;
  background: linear-gradient(
    to bottom,
    #bfc2c4 0%,
    #e4e6e7 35%,
    #ffffff 100%
  );
  color: #222;
}

.page-wrapper {
  max-width: 960px;
  margin: 0 auto;
  padding: 60px 20px 80px;
}

/* Header */
.page-header {
  margin-bottom: 40px;
}

.page-header h1 {
  font-size: 22px;
  font-weight: normal;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: #555;
  margin: 0 0 10px 0;
}

.page-header p {
  margin: 0;
  font-size: 15px;
  color: #777;
}

/* --------------------
   Bot Container
--------------------- */

.bot-shell {
  max-width: 440px;
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.18);
  padding: 24px;
}

.chat-body {
  max-height: 420px;
  overflow-y: auto;
  font-size: 15px;
  line-height: 1.7;
}

.message {
  margin-bottom: 18px;
}

/* Highlighted permission prompt */
.reflection-prompt {
  background: #f6f1ea;
  border-left: 3px solid #d8cfc3;
  padding: 14px 16px;
  border-radius: 8px;
}

/* Question dock */
.question-dock {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #eee;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* Buttons */
.btn {
  padding: 6px 12px;
  border-radius: 16px;
  font-size: 13px;
  border: 1px solid #ddd;
  background: white;
  cursor: pointer;
}

.btn:disabled {
  opacity: 0.45;
  cursor: default;
}

.saira {
  box-shadow: 0 0 10px rgba(255,180,120,0.55);
}

.aayan {
  box-shadow: 0 0 10px rgba(120,180,255,0.55);
}

/* Footer */
.page-footer {
  margin-top: 80px;
  font-size: 13px;
  color: #888;
}

/* Mobile */
@media (max-width: 600px) {
  .bot-shell {
    max-width: 100%;
  }
}
</style>
</head>

<body>

<div class="page-wrapper">

  <!-- Header -->
  <div class="page-header">
    <h1>Our Story</h1>
    <p>A quiet companion space for <em>Where The Sky Remembers Us</em>.</p>
  </div>

  <!-- Bot -->
  <div class="bot-shell">

    <div class="chat-body" id="chatBody"></div>
    <div class="question-dock" id="questionDock"></div>

  </div>

  <!-- Footer -->
  <div class="page-footer">
    Â© 2026 Mohan R. All rights reserved.
  </div>

</div>

<!-- Hidden Formspree -->
<form id="reflectionForm" action="https://formspree.io/f/xaqdqobr" method="POST" style="display:none;">
  <input type="hidden" name="voice" id="formVoice">
  <input type="hidden" name="reflection_1" id="r1">
  <input type="hidden" name="reflection_2" id="r2">
  <input type="hidden" name="reflection_3" id="r3">
  <input type="hidden" name="timestamp" id="formTime">
</form>

<script>
const chatBody = document.getElementById("chatBody");
const dock = document.getElementById("questionDock");

let activeVoice = null;
let answered = new Set();
let reflections = [];
let reflectionStep = 0;

function autoScroll() {
  chatBody.scrollTo({ top: chatBody.scrollHeight, behavior: "smooth" });
}

function loadWelcome() {
  chatBody.innerHTML = `
    <div class="message">
      <p>Hello.</p>
      <p>This is a quiet space.</p>
      <p>You can listen to our story through Saira or Aayan.</p>
      <p>Our story is a contemporary romantic fiction.</p>
      <p>When youâ€™re ready, you can choose a voice.</p>
    </div>
  `;
  dock.innerHTML = `
    <button class="btn saira" onclick="selectVoice('saira')">Saira</button>
    <button class="btn aayan" onclick="selectVoice('aayan')">Aayan</button>
  `;
  autoScroll();
}

function selectVoice(v) {
  activeVoice = v;

  const intro =
    v === "saira"
      ? "Hello, this is Saira. I donâ€™t believe stories are meant to be explained too quickly â€” but I can sit with you and share what ours carries."
      : "Hello. This is Aayan. I donâ€™t speak easily about what stayed behind, but I can tell you what it asked of us.";

  chatBody.insertAdjacentHTML(
    "beforeend",
    `<div class="message"><p><strong>${intro}</strong></p></div>`
  );
  showQuestions();
  autoScroll();
}

function showQuestions() {
  const questions = [
    ["What kind of story is this?", "story"],
    ["What is the story about?", "about"],
    ["Who is this story for?", "for"],
    ["Where can I read it?", "where"],
    ["Who is the author?", "author"]
  ];
  dock.innerHTML = "";
  questions.forEach(q => {
    const b = document.createElement("button");
    b.className = `btn ${activeVoice}`;
    b.textContent = q[0];
    b.onclick = () => answer(q[1], b);
    dock.appendChild(b);
  });
}

function answer(type, btn) {
  btn.disabled = true;
  answered.add(type);

  const replies = {
    saira: {
      story: "Our story is a contemporary romantic fiction, shaped by moments that arrive quietly and stay longer than expected.",
      about: "Itâ€™s about me and Aayan â€” about love, distance, and the choices we carry with us.",
      for: "For readers who value emotion, reflection, and the spaces between words.",
      where: "You can read it as a Kindle eBook, Paperback, Hardcover, or Audio edition.",
      author: "Mohan R. wrote this as his debut novel, drawing from lived emotion and travel."
    },
    aayan: {
      story: "Itâ€™s a contemporary romantic fiction, but it stays where love and responsibility pull in different directions.",
      about: "Itâ€™s about timing. About knowing something matters, and still choosing carefully.",
      for: "For those who understand that not every story arrives neatly.",
      where: "The story is available in digital, print, and audio formats.",
      author: "Mohan R. wrote this story to sit honestly with complicated love."
    }
  };

  chatBody.insertAdjacentHTML(
    "beforeend",
    `<div class="message"><p>${replies[activeVoice][type]}</p></div>`
  );
  autoScroll();

  if (answered.size === 5) askPermission();
}

function askPermission() {
  chatBody.insertAdjacentHTML(
    "beforeend",
    `<div class="message reflection-prompt">
      <p><em>If youâ€™d like, you can share a few quiet reflections.</em></p>
      <p><em>Would you like to do that?</em></p>
    </div>`
  );
  dock.innerHTML = `
    <button class="btn ${activeVoice}" onclick="startReflection()">Yes</button>
    <button class="btn" onclick="declineReflection()">No</button>
  `;
  autoScroll();
}

function declineReflection() {
  dock.innerHTML = "";
  chatBody.insertAdjacentHTML(
    "beforeend",
    `<div class="message"><p>Thatâ€™s completely fine. Thank you for listening.</p>
     <p><a href="https://wheretheskyremembersus.com">Return to the main site</a></p></div>`
  );
  autoScroll();
}

function startReflection() {
  reflections = [];
  reflectionStep = 0;
  nextReflection();
}

function nextReflection() {
  const sets = {
    saira: [
      ["How closely did this story stay with you?", ["ğŸŒ«ï¸","ğŸŒ±","ğŸ’›","ğŸŒ™","âœ¨"]],
      ["How clearly did the emotions feel to you?", ["ğŸŒ‘","ğŸŒ˜","ğŸŒ—","ğŸŒ•","â˜€ï¸"]],
      ["How drawn do you feel to continue reading?", ["ğŸš¶","ğŸ‘€","ğŸ’«","â¤ï¸","ğŸ“–"]]
    ],
    aayan: [
      ["How clearly did the emotional world reveal itself to you?", ["ğŸŒ‘","ğŸŒ˜","ğŸŒ—","ğŸŒ•","â˜€ï¸"]],
      ["How steady did the story feel to you?", ["ğŸŒ«ï¸","ğŸŒ±","ğŸ’›","ğŸŒ™","âœ¨"]],
      ["How drawn do you feel to continue reading?", ["ğŸš¶","ğŸ‘€","ğŸ’«","â¤ï¸","ğŸ“–"]]
    ]
  };

  if (reflectionStep === 3) {
    submitReflection();
    return;
  }

  const [q, emojis] = sets[activeVoice][reflectionStep];
  chatBody.insertAdjacentHTML("beforeend", `<div class="message"><p>${q}</p></div>`);

  dock.innerHTML = "";
  emojis.forEach(e => {
    const b = document.createElement("button");
    b.className = `btn ${activeVoice}`;
    b.textContent = e;
    b.onclick = () => {
      reflections.push(e);
      reflectionStep++;
      nextReflection();
    };
    dock.appendChild(b);
  });
  autoScroll();
}

function submitReflection() {
  document.getElementById("formVoice").value = activeVoice;
  document.getElementById("r1").value = reflections[0];
  document.getElementById("r2").value = reflections[1];
  document.getElementById("r3").value = reflections[2];
  document.getElementById("formTime").value = new Date().toISOString();
  document.getElementById("reflectionForm").submit();

  dock.innerHTML = "";
  chatBody.insertAdjacentHTML(
    "beforeend",
    `<div class="message">
      <p>Thank you for listening.</p>
      <p><a href="https://wheretheskyremembersus.com">Return to the main site</a></p>
     </div>`
  );
  autoScroll();
}

loadWelcome();
</script>

</body>
</html>
